function default_menu(){mobile_view===!1?($("nav").removeClass("show_menu"),$("nav .top_menu:hidden").show(),$("nav .show_submenu").removeClass("show_submenu"),$("nav .sub:visible").hide()):$("nav .top_menu:visible").hide()}function resize_window(){var e=find_screen_width(),n=mobile_view;mobile_view=800>=e,n!=mobile_view&&(n=mobile_view,default_menu()),"function"==typeof resize_window_addl&&resize_window_addl(e)}function find_screen_width(){var e=$(window).width();return document.body&&document.body.offsetWidth&&(e=document.body.offsetWidth),"CSS1Compat"==document.compatMode&&document.documentElement&&document.documentElement.offsetWidth&&(e=document.documentElement.offsetWidth),window.innerWidth&&(e=window.innerWidth),e}function toggle_menu(){var e=$("nav");e.is(".show_menu")?(e.removeClass("show_menu"),$(".top_menu",e).slideUp(200)):(e.addClass("show_menu"),$(".top_menu",e).slideDown(200))}function toggle_submenu(e){var n=e.parents("li"),i=$(".sub",n);n.is(".show_submenu")?(n.removeClass("show_submenu"),i.slideUp(200)):(n.addClass("show_submenu"),i.slideDown("200"))}var mobile_view=!1,menu_index=0,active_menu_l2=!1,active_menu_l3=!1,init_drop_menu=function(e){menu_index++,e.attr("menuid",menu_index),$("ul.sub, ul.sub ul.menu-l3",e).hide();var n=0;$("ul",e).each(function(){n++,$(this).attr("menuindex",n)}),e.children("li").data("menulevel","1"),e.children("ul.sub > li").data("menulevel","2"),e.children("ul.sub ul.menu-l3 > li").data("menulevel","3"),drop_menu_hover_event(e),drop_menu_focus_event(e)},drop_menu_hover_event=function(e){$("li:has(ul.sub)",e).hover(function(){mobile_view===!1&&$("ul.sub",this).show()},function(){mobile_view===!1&&$("ul.sub",this).hide()}).focusin(function(){$l2_menu=$("ul.sub",this),$l2_menu.show(),active_menu_l2!=$l2_menu.attr("menuindex")&&(hide_drop_menu($('ul.sub[menuindex="'+active_menu_l2+'"]'),2),active_menu_l2=$l2_menu.attr("menuindex"))})},drop_menu_focus_event=function(e){$("body *").focus(function(n){if(0!=active_menu_l2){var i=$(n.target);if(0===i.parents('[menuid="'+e.attr("menuid")+'"]').length)active_menu_l3!==!1&&hide_drop_menu($('ul.menu-l3[menuindex="'+active_menu_l3+'"]'),3),hide_drop_menu($('ul.sub[menuindex="'+active_menu_l2+'"]'),2);else if(i.is("a")&&i.parent("li").parent("ul").is('[menuid="'+e.attr("menuid")+'"]')){var t=i.parent("li").has('ul.sub[menuindex="'+active_menu_l2+'"]').children("ul.sub");t.is(".sub")===!1&&(active_menu_l3!==!1&&hide_drop_menu($('ul.menu-l3[menuindex="'+active_menu_l3+'"]'),3),hide_drop_menu($('ul.sub[menuindex="'+active_menu_l2+'"]'),2))}else if(active_menu_l2!==!1&&i.is("a")&&i.parent("li").parent("ul").is(".sub")){var u=i.parent("li").has('ul.menu-l3[menuindex="'+active_menu_l3+'"]').children("ul.menu-l3");u.is(".menu-l3")===!1&&hide_drop_menu($('ul.menu-l3[menuindex="'+active_menu_l3+'"]'),3)}}})},hide_drop_menu=function(e,n){e.css("left","-9000px").hide(),2==n?active_menu_l2=!1:3==n&&(active_menu_l3=!1)},resize_window_addl=null,custom_list_filter_settings,list_filter=function(e){var n={viewSelector:".viewer",viewDataAttr:"category",containSelector:".viewer_items",containDataAttr:"category",itemSelector:".item",allValue:"all",activeClass:"active",useHash:!1};"object"==typeof custom_list_filter_settings&&$.extend(n,custom_list_filter_settings),"object"==typeof e&&$.extend(n,e);var i=$(n.containSelector);if(0!==i.length){if(n.useHash===!0){var t=document.location.hash.length,u=!1;if(t>0){var l=window.location.hash.substring(1),o=$(n.viewSelector).filter("[data-"+n.viewDataAttr+'="'+l+'"], #'+l);o.length>0&&(u=!0,list_filter_show(o,i,n))}if(u===!1){var s=$(n.viewSelector).filter(":first");list_filter_show(s,i,n)}}$(n.viewSelector).click(function(e){e.preventDefault(),list_filter_show($(this),i,n)})}},list_filter_show=function(e,n,i){var t=e.data(i.viewDataAttr);"undefined"!=typeof t&&null!==t&&0!==t.length||(t=e.prop("id")),"string"!=typeof t&&"number"!=typeof t||(t==i.allValue?$(i.itemSelector,n).show():($(i.itemSelector,n).hide(),$(i.itemSelector,n).filter("[data-"+i.containDataAttr+'="'+t+'"], .'+t).show()),$(i.viewSelector+"."+i.activeClass).removeClass(i.activeClass),e.addClass(i.activeClass),i.useHash===!0&&list_filter_hash(t))},list_filter_hash=function(e){document.location.hash="#"+e};$(document).ready(function(){resize_window(),$(window).resize(function(){resize_window()}),init_drop_menu($("#top_menu")),$("nav .menu").click(function(){toggle_menu()}),$("nav .submenu").click(function(){toggle_submenu($(this))}),list_filter(),$(".more").click(function(){var e=$(this).prop("id").substring(5);$("#short-"+e).hide(),$("#long-"+e).show()}),$(".less").click(function(){var e=$(this).prop("id").substring(5);$("#short-"+e).show(),$("#long-"+e).hide()})});